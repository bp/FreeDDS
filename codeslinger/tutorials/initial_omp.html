<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Data Dictionary System: Code Slinger Tutorials (OpenMP)</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <meta name="keywords" 
      content="Data Dictionary System Free Seismic Processing System">
    <link href="../../styles.css" type="text/css" rel="stylesheet">
    <script src="../../javascript.js" language="JavaScript"
      type="text/javascript"></script>
    </script>
    <style type="text/css">
      pre {color:#000000;}
    </style>
  </head>
  <body>

    <script type="text/javascript">
      header("codeslinger","tutorials","initial_omp")
    </script>
    <!*********************************************************************>

<pre>
c***********************************************************************
c
c Initialize distributed arrays inside OpenMP loops to lay them out
c for fastest use on NUMA machnes.
c
c***********************************************************************

      subroutine initial_omp
     :      ( cmp_in, cmp_out, geom, work,
     :        n1_d,n2_d, n1_g,n2_g, nproc )

      implicit none

c Arguments
      integer n1_d,n2_d, n1_g,n2_g, nproc

      real    cmp_in(n1_d,n2_d,nproc), cmp_out(n1_d,n2_d,nproc)
      real    geom(n1_g,n2_g,nproc)
      real    work(n1_d,9,nproc)

c Locals
      integer i1,i2,ip

c-----------------------------------------------------------------------

C$OMP PARALLEL DO DEFAULT(shared), PRIVATE(i1,i2,ip)
      do ip=1,nproc

         do i2=1,n2_d
            do i1=1,n1_d
               cmp_in(i1,i2,ip) = 0.0
               cmp_out(i1,i2,ip) = 0.0
            enddo
         enddo

         do i2=1,n2_g
            do i1=1,n1_g
               geom(i1,i2,ip) = 0.0
            enddo
         enddo

         do i2=1,9
            do i1=1,n1_d
               work(i1,i2,ip) = 0.0
            enddo
         enddo

      enddo
C$OMP END PARALLEL DO

c
c All done
c
      return
      end
</pre>
  
    <!*********************************************************************>
    <script type="text/javascript">footer()</script>
  </body>
</html>
