<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <body>

    <h2>fddz_mapin - open a DDS dataset for input, passing samples mapped to an application specific host-dependent type</h2>
    <hr>
    <h2>SYNOPSIS</h2>
    <b>#include "fdds.h"</b><br>
    <b>#include "fddz.h"</b>
    <p>
      <b>integer function fddz_mapin(</b><i>alias, value, title, host_type, open_tag</i><b>)</b>
      <dl><dd>
        <b>character </b><i>alias*(*)</i><br>
        <b>character </b><i>value*(*)</i><br>
        <b>character </b><i>title*(*)</i><br>
        <b>character </b><i>host_type*(*)</i><br>
        <b>integer   </b><i>open_tag</i><br>
      </dl>

    <h2>DESCRIPTION</h2>
    Function <b>"fddz_mapin"</b> opens a file with user-defined sample type
    mapping. It also completes an open that was started by <b>"fddz_intype"</b>.
    <p>
    When an application needs a specific type of sample that is not accomodated
    by <b>"fddx_in"</b>, <b>"fddz_mapin"</b> allows the application to map
    input data of any type to buffer samples of <i>host_type</i>. If the input
    stream has not yet been openned, then <i>open_tag</i> should be set to -1.
    <p>
    If the application needs to know the sample type of the input stream
    before deciding how to map samples, <b>"fddz_intype"</b> can be used to
    initiate the open process and detect the host-dependent type of external
    samples. That information can be used to set the <i>host_type</i> before
    calling <b>"fddz_mapin"</b> with the <i>open_tag</i> that was returned by
    <b>"fddz_intype"</b>.
    <p>
    All headers will be dropped leaving the "Samples" starting at the first
    value of each trace.  Samples are mapped to host-dependent <i>host_type</i>.
    The dataset is open with "r+" so that it can be modified.
    <p>
    After opening a file for input with <b>"fddz_mapin"</b> the input
    buffer dictionary will be left open for scanning. The open process 
    will look for "<i>alias</i>" for the dictionary, "<i>alias</i><b>_data</b>"
    for overriding the binary, and "<i>alias</i><b>_format</b>" for overriding
    the format.  <b>"fddz_mapin"</b> returns an integer TAG associated with the
    internal buffer dictionary. A value of -1 signifies an open failure.
    <p>
    The following table shows the DDS association between genus, host_type,
    and precision.
    <pre>
    genus     host_type        DDS type      precision
                                              (bytes)

    integer   signed char      DDS_SCHAR         1
    integer   short            DDS_SHORT         2
    integer   int              DDS_INT           4
    integer   long long        DDS_LLONG         8

    float     float            DDS_FLOAT         4
    float     double           DDS_DOUBLE        8
    float     long double      DDS_LDOUBLE      16

    complex   complex          DDS_CPX           8
    complex   complex double   DDS_DBLCPX       16
    complex   complex long     DDS_LDBLCPX      32
    </pre>

   <h2> EXAMPLE</h2>
   <pre>
integer   tmp_tag,buf_tag
character title*(*), genus*(*), host_type_in*(*), host_type_buf*(*)
 ...
tmp_tag=fddz_intype('in','stdin:',title,genus,host_type_in)
if (index(genus,'integer').gt.0) host_type_buf='long long'
if (index(genus,'float').gt.0)   host_type_buf='double'
if (index(genus,'complex').gt.0) host_type_buf='complex double'
buf_tag=fddz_mapin('in','stdin:',title,host_type_buf,tmp_tag)
 ...
   </pre>

   <h2>SEE ALSO</h2>
   <pre>
<a href="flibs.php?lib=ddz&api=fddz_intype">fddz_intype</a> Open a file and get host-dependent type of Samples
<a href="flibs.php?lib=ddz&api=fddz_mapin2">fddz_mapin2</a> Open a buffer with specific Sample maping
<a href="flibs.php?lib=ddz&api=fddz_hdtin">fddz_hdtin</a> Open a file with equivalent host-dependent Sample mapping
<a href="flibs.php?lib=ddz&api=fddz_hdtin2">fddz_hdtin2</a> Open a file with equivalent host-dependent Sample mapping
   </pre>

   <h2>AUTHOR</h2>
   Mike O'Brien, <b>Allied Geophysics</b> (September, 2012)

  </body>
</html>
